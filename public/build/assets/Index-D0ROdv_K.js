import{c as D,r as l,d as r,j as e,H as S,L as k}from"./app-Dbyc-TFa.js";import{A}from"./AuthenticatedLayout-BcYsIAsf.js";import{C as p,i as f}from"./format-DH7gNy5Q.js";import{F as i,D as h,S as m}from"./SelectBox-DFVmsUjk.js";import{B}from"./Button-C2agVmIp.js";import{T as I,a as L}from"./TransactionCard-BestoFfH.js";import{a as d}from"./format-vJMJZY6L.js";import"./transition-D6loxbGF.js";import"./rocket-Bj4aiEfB.js";import"./clsx-B-dksMZM.js";import"./index-DmX-GCnC.js";function G({transactions:u,categories:x}){const{props:g}=D(),c=new Date;c.setFullYear(c.getFullYear()-1);const j=g.filters??{from:d(c),to:d(new Date),type:"both",category:"all",sort:"newest"},b=l.useMemo(()=>[{value:"both",label:"Both"},{value:"expense",label:"Expense"},{value:"income",label:"Income"}],[]),y=l.useMemo(()=>[{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"}],[]),w=l.useMemo(()=>[{value:"all",label:"All",type:""},...x.map(t=>({value:String(t.id),label:t.name,type:t.type}))],[x]),[o,n]=l.useState(j),C=l.useCallback(t=>{n(s=>{const a={...s,from:d(t)};return r.get(route("transactions.index"),a),a})}),v=l.useCallback(t=>{n(s=>{const a={...s,to:d(t)};return r.get(route("transactions.index"),a),a})}),F=l.useCallback(t=>{n(s=>{const a={...s,category:String(t)};return r.get(route("transactions.index"),a),a})},[]),T=l.useCallback(t=>{n(s=>{const a={...s,type:String(t)};return r.get(route("transactions.index"),a),a})},[]),N=l.useCallback(t=>{n(s=>{const a={...s,sort:String(t)};return r.get(route("transactions.index"),a),a})},[]);return e.jsxs(A,{children:[e.jsx(S,{title:"Transactions"}),e.jsxs("div",{className:"align-center flex justify-between",children:[e.jsx("h2",{className:"text-xl/8 font-bold",children:"Transactions"}),e.jsx(k,{href:route("transactions.create"),children:e.jsx(B,{text:"+ Add Transaction"})})]}),e.jsxs(p,{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-start justify-between gap-2 md:flex-row",children:[e.jsx(i,{label:"Date From",className:"w-full",htmlFor:"dateFrom",id:"dateFromField",children:e.jsx(h,{className:"w-full",value:f(new Date(o.from))?new Date(o.from):c,id:"dateFrom",portalId:"dateFromField",onChange:C})}),e.jsx(i,{label:"Date To",className:"w-full",htmlFor:"dateTo",id:"dateToField",children:e.jsx(h,{className:"w-full",value:f(new Date(o.to))?new Date(o.to):new Date,id:"dateTo",portalId:"dateToField",onChange:v})})]}),e.jsxs("div",{className:"flex flex-col justify-between gap-2 md:flex-row",children:[e.jsx(i,{label:"Category",className:"w-full",children:e.jsx(m,{groupedOptionArray:w,onChange:F,value:o.category})}),e.jsx(i,{label:"Type",className:"w-full",children:e.jsx(m,{optionArray:b,onChange:T,value:o.type})}),e.jsx(i,{label:"Sort",className:"w-full",children:e.jsx(m,{optionArray:y,onChange:N,value:o.sort})})]})]}),e.jsx(p,{className:"mt-4 hidden overflow-x-auto md:block",children:e.jsx(I,{transactions:u})}),e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2 md:hidden",children:u.map(t=>e.jsx(L,{data:t}))})]})}export{G as default};
