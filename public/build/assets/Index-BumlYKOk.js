import{c as D,r as l,d as r,j as e,H as S,L as k}from"./app-BwkyX7Wq.js";import{A}from"./AuthenticatedLayout-DkkEgBhb.js";import{C as f,i as p}from"./format-Bp_3xtJa.js";import{F as i,D as h,S as u}from"./SelectBox-DCvBvGqf.js";import{B}from"./Button-DJqN2cWy.js";import{T as I,a as L}from"./TransactionCard-DkQn3Ma5.js";import{a as d}from"./format-BA6Ann-v.js";import"./transition-BY37FfXB.js";import"./rocket-CmA41tQ3.js";import"./clsx-B-dksMZM.js";import"./index-CdtfQv4Q.js";function G({transactions:m,categories:x}){const{props:g}=D(),c=new Date;c.setFullYear(c.getFullYear()-1);const j=g.filters??{from:d(c),to:d(new Date),type:"both",category:"all",sort:"newest"},b=l.useMemo(()=>[{value:"both",label:"Both"},{value:"expense",label:"Expense"},{value:"income",label:"Income"}],[]),y=l.useMemo(()=>[{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"}],[]),w=l.useMemo(()=>[{value:"all",label:"All",type:""},...x.map(t=>({value:String(t.id),label:t.name,type:t.type}))],[x]),[o,n]=l.useState(j),C=l.useCallback(t=>{n(s=>{const a={...s,from:d(t)};return r.get(route("transactions.index"),a),a})}),F=l.useCallback(t=>{n(s=>{const a={...s,to:d(t)};return r.get(route("transactions.index"),a),a})}),T=l.useCallback(t=>{n(s=>{const a={...s,category:String(t)};return r.get(route("transactions.index"),a),a})},[]),N=l.useCallback(t=>{n(s=>{const a={...s,type:String(t)};return r.get(route("transactions.index"),a),a})},[]),v=l.useCallback(t=>{n(s=>{const a={...s,sort:String(t)};return r.get(route("transactions.index"),a),a})},[]);return e.jsxs(A,{children:[e.jsx(S,{title:"Transactions"}),e.jsxs("div",{className:"align-center flex justify-between",children:[e.jsx("h2",{className:"text-xl/8 font-bold",children:"Transactions"}),e.jsx(k,{href:route("transactions.create"),children:e.jsx(B,{text:"+ Add Transaction"})})]}),e.jsxs(f,{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-start justify-between gap-2 md:flex-row",children:[e.jsx(i,{label:"Date From",className:"w-full",htmlFor:"dateFrom",id:"dateFromField",children:e.jsx(h,{className:"w-full",value:p(new Date(o.from))?new Date(o.from):c,id:"dateFrom",portalId:"dateFromField",onChange:C})}),e.jsx(i,{label:"Date To",className:"w-full",htmlFor:"dateTo",id:"dateToField",children:e.jsx(h,{className:"w-full",value:p(new Date(o.to))?new Date(o.to):new Date,id:"dateTo",portalId:"dateToField",onChange:F})})]}),e.jsxs("div",{className:"flex flex-col justify-between gap-2 md:flex-row",children:[e.jsx(i,{label:"Category",className:"w-full",children:e.jsx(u,{groupedOptionArray:w,onChange:T,defaultValue:o.category})}),e.jsx(i,{label:"Type",className:"w-full",children:e.jsx(u,{optionArray:b,onChange:N,defaultValue:o.type})}),e.jsx(i,{label:"Sort",className:"w-full",children:e.jsx(u,{optionArray:y,onChange:v,defaultValue:o.sort})})]})]}),e.jsx(f,{className:"mt-4 hidden overflow-x-auto md:block",children:e.jsx(I,{transactions:m})}),e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2 md:hidden",children:m.map(t=>e.jsx(L,{data:t}))})]})}export{G as default};
